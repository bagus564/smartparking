{% extends "base.html" %}

{% load static %}

{% block title %}{% endblock %}

{% block start %}
<title>Sign In</title> 


    <section class="relative h-screen overflow-hidden">

  

 

<div class="absolute inset-0 flex flex-col items-center justify-center px-6 mx-auto z-20">
  <div class="w-full bg-white rounded-2xl shadow-2xl 
              animate-fade-in-down transition-all duration-500 hover:scale-[1.02] sm:max-w-md">

    <div class="p-8 space-y-6">

      <!-- LOGO WTP DI POJOK KIRI ATAS -->


<!-- HEADER PUTIH + LOGO SAMPING TEKS (TANPA GARIS) -->
<div class="flex items-center justify-center gap-3 bg-white py-3 px-4 rounded-lg">
    <img src="{% static 'main/iconweb.ico' %}" class="w-10 h-10" alt="logo">
    <h1 class="text-2xl font-bold text-gray-900">Welcome Back</h1>
</div>



      <!-- FORM -->
      <form method="post" class="space-y-5">
        {% csrf_token %}
        {{ form }}


        <div>
          <label for="username" class="block mb-1 text-sm font-medium text-gray-700">Username</label>
          <div class="relative">
            <input type="text" name="username" id="username" placeholder="Your username"
              class="pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none w-full transition-all duration-200"
              required>
            <svg class="absolute left-3 top-3 w-5 h-5 text-gray-400" fill="none" stroke="currentColor"
              viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M5.121 17.804A4 4 0 017 16h10a4 4 0 011.879.464M15 11a4 4 0 10-6 0 4 4 0 006 0z" /></svg>
          </div>
        </div>

        <div>
          <label for="password" class="block mb-1 text-sm font-medium text-gray-700">Password</label>
          <div class="relative">
            <input type="password" name="password" id="password" placeholder="••••••••"
              class="pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none w-full transition-all duration-200"
              required>
            <svg class="absolute left-3 top-3 w-5 h-5 text-gray-400" fill="none" stroke="currentColor"
              viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 11c1.38 0 2.5 1.12 2.5 2.5S13.38 16 12 16s-2.5-1.12-2.5-2.5S10.62 11 12 11zM6 12c0-3.314 2.686-6 6-6s6 2.686 6 6" /></svg>
          </div>
        </div>

        {% if error %}
          <p id="login-error-message" class="hidden">{{ error }}</p>
        {% endif %}

        <button type="submit"
          class="w-full py-3 text-white font-semibold bg-gradient-to-r from-blue-900 to-[#141E61] rounded-lg hover:shadow-[0_0_15px_#141E61] hover:brightness-110 transition-all duration-300">
          Sign In
        </button>
      </form>

      <p class="text-center text-sm text-gray-600">
        Don't have an account?
        <a href="{% url 'register' %}" class="text-blue-700 hover:underline">Register now</a>
      </p>
    </div>
  </div>
</div>

</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // 1. Tampilkan Error Login (dari variabel 'error' di views.py)
    const errorMessageElement = document.getElementById('login-error-message');
    if (errorMessageElement) {
        const errorMessage = errorMessageElement.textContent.trim();
        if (errorMessage) {
            Swal.fire({
                title: 'Login Gagal!',
                text: errorMessage,
                icon: 'error',
                confirmButtonText: 'Coba Lagi'
            });
        }
    }
    
    // 2. Tampilkan Django Messages (misalnya: pesan sukses dari register_view)
    // Pastikan kode ini ada di base.html atau di sini jika tidak ada di base.html
    {% if messages %}
        {% for message in messages %}
            // Tentukan ikon berdasarkan tag pesan
            let icon = 'info';
            if ('{{ message.tags }}'.includes('success')) {
                icon = 'success';
            } else if ('{{ message.tags }}'.includes('error')) {
                icon = 'error';
            } else if ('{{ message.tags }}'.includes('warning')) {
                icon = 'warning';
            }
            
            // Tampilkan pesan menggunakan SweetAlert
            Swal.fire({
                title: icon.charAt(0).toUpperCase() + icon.slice(1), 
                text: "{{ message|escapejs }}", 
                icon: icon,
                confirmButtonText: 'OK'
            });
        {% endfor %}
    {% endif %}
});
</script>

{% endblock %}